application {
  name = "Altyn BI / MSV-023"
  version = "0.0.1"
  cluster-name = "altyn-bi-msv023"
  run_type = "debug"
}

akka {
  loglevel = "ERROR"
  log-config-on-start = on

  coordinated-shutdown.run-by-jvm-shutdown-hook = on

  kafka {
    producer {
      # Config path of Akka Discovery method
      # "akka.discovery" to use the Akka Discovery method configured for the ActorSystem
      discovery-method = akka.discovery

      # Set a service name for use with Akka Discovery
      # https://doc.akka.io/docs/alpakka-kafka/current/discovery.html
      service-name = ""

      # Timeout for getting a reply from the discovery-method lookup
      resolve-timeout = 3 seconds

      # Tuning parameter of how many sends that can run in parallel.
      # In 2.0.0: changed the default from 100 to 10000
      parallelism = 100

      # Duration to wait for `KafkaProducer.close` to finish.
      close-timeout = 60s

      # Call `KafkaProducer.close` when the stream is shutdown. This is important to override to false
      # when the producer instance is shared across multiple producer stages.
      close-on-producer-stop = true

      # Fully qualified config path which holds the dispatcher configuration
      # to be used by the producer stages. Some blocking may occur.
      # When this value is empty, the dispatcher configured for the stream
      # will be used.
      use-dispatcher = "akka.kafka.default-dispatcher"

      # The time interval to commit a transaction when using the `Transactional.sink` or `Transactional.flow`
      # for exactly-once-semantics processing.
      eos-commit-interval = 100ms

      # Properties defined by org.apache.kafka.clients.producer.ProducerConfig
      # can be defined in this configuration section.
      kafka-clients {
        bootstrap.servers = "broker1:9092,broker2:9092,broker3:9092"
        bootstrap.servers = ${?BOOTSTRAP_SERVERS}
      }
    }

    consumer {
      # Tuning property of scheduled polls.
      poll-interval = 50ms

      # Tuning property of the `KafkaConsumer.poll` parameter.
      # Note that non-zero value means that blocking of the thread that
      # is executing the stage will be blocked.
      poll-timeout = 50ms

      # The stage will be await outstanding offset commit requests before
      # shutting down, but if that takes longer than this timeout it will
      # stop forcefully.
      stop-timeout = 30s

      # How long to wait for `KafkaConsumer.close`
      close-timeout = 20s

      # If offset commit requests are not completed within this timeout
      # the returned Future is completed `TimeoutException`.
      commit-timeout = 15s

      # If the KafkaConsumer can't connect to the broker the poll will be
      # aborted after this timeout. The KafkaConsumerActor will throw
      # org.apache.kafka.common.errors.WakeupException, which can be handled
      # with Actor supervision strategy.
      wakeup-timeout = 10s

      # Fully qualified config path which holds the dispatcher configuration
      # to be used by the KafkaConsumerActor. Some blocking may occur.
      use-dispatcher = "akka.kafka.default-dispatcher"

      # Properties defined by org.apache.kafka.clients.consumer.ConsumerConfig
      # can be defined in this configuration section.
      kafka-clients {
        # auto-commit disabled by default
        # Setting enable.auto.commit means that offsets are committed automatically
        #  with a frequency controlled by the config auto.commit.interval.ms.
        enable.auto.commit = true

        auto.offset.reset = "latest"
        auto.commit.interval.ms = 10000

        bootstrap.servers = "broker1:9092,broker2:9092,broker3:9092"
        bootstrap.servers = ${?BOOTSTRAP_SERVERS}
      }
    }
  }
}

ksqldb {
    host = "ksql1"
    host = ${?KSQLDB_SERVER_HOST}
    port = 8088
    port = ${?KSQLDB_SERVER_HOST_PORT}
}

kafka {
  groupid = ${application.cluster-name}"-akka-group"
}

schema-registry {
    url = "http://zookeep:8081"
    url = ${?SCHEMA_REGISTRY_URL}
}


proxy {
    host = "137.136.51.120"
    port = 9090
    non_proxy_hosts = "zookeep,broker1,broker2,broker3,ksql1"
    non_proxy_hosts = ${?NON_PROXY_HOSTS}
}
